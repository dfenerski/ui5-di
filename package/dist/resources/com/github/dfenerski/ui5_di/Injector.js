sap.ui.define(["reflect-metadata/lite","./di-container/DIContainer","./di-container/misc/constants","./injector-util/InjectorUtil","./injector-util/misc/constants","./misc","./reflect-util/ReflectUtil"],function(e,n,t,c,s,r,o){"use strict";const i=n["DIContainer"];const a=t["Precedence"];const d=c["InjectorUtil"];const l=s["DependencyResolutionStrategy"];const y=r["E_INJECTOR_NO_DEPENDENCY_FACTORY"];const u=o["ReflectUtil"];class I{static logger=console;static _container=new i;static dumpContainerInfo(){this.logger.error("Injector._container:\n",this._container)}static createDependencyProxy(e){return new Proxy(e,{get:(e,n,t)=>{if(!e.dependencyInstance){return undefined}return Reflect.get(e.dependencyInstance,n,t)}})}static register(e){const n=u.getIsFactoryOnly(e);const t=u.getParameterTypes(e);if(!n){t.forEach(e=>this.register(e))}const c=u.getInjectionToken(e);const s=u.getPrecedence(e);if(this._container.has(c)){const{dependencyClass:n,dependencyInstance:t,precedence:r}=this._container.get(c);const o=u.getIsSealedSettlement(n);if(n===e){return}else if(r>s){return}else if(o&&t){return}}const r={dependencyInstance:null};const o={dependencyClass:e,dependencyInstance:null,dependencyProxy:this.createDependencyProxy(r),dependencyProxyContext:r,precedence:s};this._container.set(c,o)}static settle(e,n){const t=d.normalizeSettleToken(e);const{dependencyClass:c,dependencyInstance:s,dependencyProxy:r,dependencyProxyContext:o,precedence:i}=this._container.get(t);if(s){return s}const a=u.getIsFactoryOnly(c);if(a&&!n){throw new Error(y)}const l=u.getParameterTypes(c);const I=u.getParameterInjectionTokens(c);const p=a?[]:l.map((e,n)=>this.settle(I[n]||u.getInjectionToken(e)));const f=n?n():new c(...p);o.dependencyInstance=f;this._container.set(t,{dependencyClass:c,dependencyInstance:f,dependencyProxy:r,dependencyProxyContext:o,precedence:i});return f}static settleLazy(e,n){const t=d.normalizeSettleToken(e);const{dependencyClass:c,dependencyInstance:s,dependencyProxy:r}=this._container.get(t);if(s){return[s,()=>s]}const o=u.getIsFactoryOnly(c);if(o&&!n){throw new Error(y)}return[r,()=>this.settle(t,n)]}static Inject(e){return function(n,t,c){const s=u.getParameterInjectionTokens(n);s[c]=e;u.setParameterInjectionTokens(n,s)}}static Injectable(e=l.POLYMORPHIC){const{drs:n,primitiveToken:t}=d.parseInjectableArguments(e);return function(e){const c=d.resolveInjectionToken({dependencyClass:e,drs:n,primitiveToken:t});const s=u.getPrecedence(e)||a.DEFAULT;u.setInjectionToken(e,c);u.setPrecedence(e,s);I.register(e)}}static Precedence(e){return function(n){u.setPrecedence(n,e)}}static Final(){return function(e){u.setPrecedence(e,a.FINAL)}}static FactoryOnly(e){return function(n){u.setIsFactoryOnly(n,true);if(e?.seal!==false){u.setIsSealedSettlement(n,true)}}}static Seal(){return function(e){u.setIsSealedSettlement(e,true)}}}const p=I.dumpContainerInfo.bind(I);const f=I.settle.bind(I);const P=I.settleLazy.bind(I);const g=I.Inject.bind(I);const m=I.Injectable.bind(I);const j=I.Precedence.bind(I);const C=I.Final.bind(I);const h=I.FactoryOnly.bind(I);const T=I.Seal.bind(I);var _={__esModule:true};_.FactoryOnly=h;_.Final=C;_.Inject=g;_.Injectable=m;_.Precedence=j;_.Seal=T;_.dumpContainerInfo=p;_.settle=f;_.settleLazy=P;return _});
//# sourceMappingURL=Injector.js.map